# ディスレクシア治療アプリ - プロジェクト構成

## ファイル構成

このプロジェクトは以下のファイル構成になっています：

```
dyslexia-app/
├── docs/
│   ├── project_structure.md             # このファイル
│   ├── terminology_and_basics.md        # 基本概念と前提条件
│   ├── gamification_system.md           # ゲーム要素の設計
│   ├── tailored_program.md              # 個別最適化プログラム
│   └── cbt_feedback_system.md           # 心理的サポート機能
├── app/                                 # Expoアプリケーションのメインディレクトリ
│   ├── screens/                         # 各種画面コンポーネント
│   ├── components/                      # 共通コンポーネント
│   └── types/                           # TypeScript型定義
├── src/                                 # ソースコード
│   ├── services/                        # ビジネスロジック
│   ├── components/                      # UI コンポーネント
│   └── lib/                            # ライブラリ・ユーティリティ
└── assets/                              # 画像、音声、フォントなどのリソース
```

## 各ファイルの概要

### terminology_and_basics.md
- **内容**: アプリの基本概念、用語定義、前提条件
- **対象者**: プロジェクト参加者全員
- **重要度**: ★★★★★（必読）

### gamification_system.md
- **内容**: 忍者世界観、もじ玉システム、誤答対応
- **対象者**: UI/UXデザイナー、フロントエンド開発者
- **重要度**: ★★★★☆（ユーザー体験の要）
- **実装状況**: ✓ GameScreen.tsx で手裏剣アニメーション実装済み

### tailored_program.md
- **内容**: 個別最適化ロジック、学習プログラム構成
- **対象者**: アルゴリズム開発者、教育専門家
- **重要度**: ★★★★☆（効果の核心）
- **実装状況**: ✓ stageService.ts でテイラードプログラム実装済み

### cbt_feedback_system.md
- **内容**: 認知行動療法に基づく心理的サポート機能
- **対象者**: 心理学専門家、UI/UXデザイナー
- **重要度**: ★★★☆☆（継続性の要）
- **実装状況**: ✓ cbtService.ts で実装済み

## 開発の優先順位

### Phase 1: 基盤技術 ✓ 完了
1. **音声認識AI**の実装 ✓ `voiceService.ts` で実装済み
2. **基本UI**の構築 ✓ 各画面実装済み

### Phase 2: ユーザー体験 ✓ 実装中
3. **ゲーミフィケーション**の実装 ✓ 手裏剣アニメーション、もじ玉システム実装済み
4. **テイラードプログラム**の実装 ✓ ステージシステム、制限時間管理実装済み

### Phase 3: 継続性向上 ✓ 実装中
5. **CBTフィードバック機能**の実装 ✓ ログインボーナス、ミッション、気分記録実装済み

## 技術スタック（確定）

### フロントエンド
- **React Native Expo**（モバイルアプリ）
- **音声処理ライブラリ**
  - expo-av（音声録音・再生）
  - react-native-audio-toolkit
- **アニメーション ライブラリ**
  - react-native-reanimated
  - lottie-react-native（忍者キャラクターアニメーション）

### バックエンド
- **Supabase**
  - リアルタイムデータベース
  - 認証機能
  - ファイルストレージ（音声ファイル）
  - Edge Functions（API処理）

### AI/ML
- **TensorFlow Lite**（音声認識）✓ 実装済み
  - モバイル最適化: `react-native-fast-tflite` を使用
  - リアルタイム処理: 2秒間の音声録音と判定
  - モデルダウンロード機能: GitHubリリースからのダウンロード実装済み
- **音声認識サービス**
  - `aiService.ts`: TensorFlowモデルの管理とAI判定
  - `voiceService.ts`: 音声録音・再生・評価機能
  - 現在はランダム判定によるフォールバック対応

## 開発チーム体制

### 必要な役割
- **プロジェクトマネージャー**
- **AI/ML エンジニア**（岸さん担当）
- **モバイルアプリ開発者**
- **UI/UXデザイナー**
- **教育専門家**（小枝先生）
- **QAエンジニア**

## 現在の実装状況

### 実装済み機能
1. **音声認識システム**
   - TensorFlow Lite モデルの統合（react-native-fast-tflite）
   - 2秒間の音声録音と判定機能
   - AI モデルのダウンロード・管理機能

2. **ゲーミフィケーション**
   - 忍者テーマのUI実装
   - 手裏剣アニメーション（正解・不正解パターン）
   - もじ玉収集システム
   - レベルアップ機能

3. **テイラードプログラム**
   - 訓練レベル1〜3（2.5秒→2.0秒→1.7秒）
   - テストステージ（3/4以上の正解率で進級）
   - ラストステージ（1.5秒以内）
   - 初級・中級・上級のステージ分け

4. **CBT機能**
   - ログインボーナスシステム
   - 今日の任務（ミッション）
   - 気分記録機能
   - 考え方カード選択

### 主要なサービス
- `aiService.ts`: TensorFlowモデル管理、AI判定
- `voiceService.ts`: 音声録音・再生・評価
- `stageService.ts`: ステージ進行管理、テイラードプログラム
- `cbtService.ts`: CBT機能、ミッション管理
- `progressService.ts`: ユーザー進捗管理
- `authService.ts`: 認証管理
- `soundService.ts`: 効果音・BGM管理

## 追加されたドキュメント

### ✅ APIドキュメント (api_documentation.md)
- 全サービスのAPI仕様
- データ型定義
- Supabaseスキーマ定義
- エラーハンドリングパターン
- オフラインサポート実装

### ✅ デプロイメントガイド (deployment_guide.md)
- EAS Build設定
- 環境変数設定
- リリースフロー
- ストア申請プロセス
- モニタリング設定

### ✅ TensorFlow Lite仕様 (tflite_spec.md)
- AI技術の詳細仕様
- 音声認識フローの詳細
- モデルのダウンロード・管理方法
- AI判定ロジックの説明

### ✅ Supabaseセットアップ (supabase_setup.md)
- データベース設定
- 認証設定
- RLS（Row Level Security）設定
- バックアップ戦略

## 注意事項

### 医療機器としての考慮
- 治験対象のため、品質管理が重要
- ユーザーデータの取り扱いに注意
- 定期的な専門家レビューが必要

### ターゲットユーザー
- **主要ユーザー**: ディスレクシアの子ども
- **サポートユーザー**: 保護者
- **利用時間**: 1日5分程度

### 技術的制約
- 音声認識の精度要求が高い
- リアルタイム処理が必要
- 子ども向けUI/UXの配慮が必須