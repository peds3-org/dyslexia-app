# テイラードプログラム仕様

## 補助技術②：テイラードプログラム

### 目的
スピード・個々人の特徴に基づく訓練の最適化

### 設計方針
小枝先生MTGでのアドバイスをもとに検討
**全拗音の正答率で分ける**

## レベル分け基準

### 初期評価
- **評価基準**: 2.5秒以内での全拗音の正答率で分ける
- **評価方法**: ※アプリ内ではユーザーが直接ステージを選択（初級・中級・上級）

### レベル判定
| 正答率 | スタートレベル | 備考 |
|--------|---------------|------|
| 1/3以上 | 中級1からスタート | 単音の訓練から開始 |
| 1/3未満 | 初級1からスタート | 重症判断。頻出拗音の練習から始める |

## プログラム構成（最新版：0515小枝MTG後修正ver.）

### 初級：直音ステージ
| 段階 | 内容 | 制限時間 | 回数 | 次のステップへの条件 |
|------|------|----------|------|-------------------|
| 訓練1 | 発音訓練 | 2.5秒以内 | 3セット | 3セットを消化する |
| 訓練2 | 発音訓練 | 2.0秒以内 | 3セット | 3セットを消化する |
| 訓練3 | 発音訓練 | 1.7秒以内 | 3セット | 3セットを消化する |
| テストステージ | 総合テスト | 1.7秒以内 | - | 3/4以上の正解 |

### 中級：直音＋頻出拗音ステージ
| 段階 | 内容 | 制限時間 | 回数 | 次のステップへの条件 |
|------|------|----------|------|-------------------|
| 訓練1 | 発音訓練 | 2.5秒以内 | 2セット | 2セットを消化する |
| 訓練2 | 発音訓練 | 2.0秒以内 | 2セット | 2セットを消化する |
| 訓練3 | 発音訓練 | 1.7秒以内 | 2セット | 2セットを消化する |
| テストステージ | 総合テスト | 1.7秒以内 | - | 3/4以上の正解 |

### 上級：全単音ステージ
| 段階 | 内容 | 制限時間 | 回数 | 次のステップへの条件 |
|------|------|----------|------|-------------------|
| 訓練1 | 発音訓練 | 2.5秒以内 | 2セット | 2セットを消化する |
| 訓練2 | 発音訓練 | 2.0秒以内 | 2セット | 2セットを消化する |
| 訓練3 | 発音訓練 | 1.7秒以内 | 2セット | 2セットを消化する |
| テストステージ | 総合テスト | 1.7秒以内 | - | 3/4以上の正解 |

### ラストステージ
| 段階 | 内容 | 制限時間 | 条件 | 完了条件 |
|------|------|----------|------|----------|
| 最終試練 | 全単音発音 | 1.5秒以内 | 全問クリア | 終わるまで |

### 修行終了
- **完了演出**: 巻物（図鑑）が完成する

## 重要な設計判断（宿題）

### 進行基準の検討
**訓練としてどこまでの正答で次に進めるようにするか**

#### 選択肢
1. **絶対基準方式**: 2.5秒が絶対的な基準となる
2. **訓練重視方式**: 訓練するだけでもOKとする

この判断に応じてゲームのプログラム内容を決める必要がある

## プログラムの前提
- **親のサポート**: 親が隣りにいて、訓練中はサポートする
- **出題制御**: 発音が正答したものは以降の訓練では出題しない

## 頻出単語の抽出
文字ごとの誤答データを参考に頻出単語を抽出する（@Mio kaneta担当）

## 実装状況
- **治験対象**: ◯
- **設計段階**: 詳細仕様確定済み ✓
- **実装状況**: `stageService.ts` で完全実装済み

### 実装済み機能
1. **制限時間管理**
   - TIME_LIMITS: 2.5秒、2.0秒、1.7秒、1.5秒
   - リアルタイムでの時間表示

2. **セット数管理**
   - REQUIRED_SETS: 初級3セット、中級・上級2セット
   - 完了セット数のカウントと表示

3. **テストモード**
   - 4問でテスト実施
   - 3/4以上の正解率で合格判定
   - 合格：次のステージへ
   - 不合格：同じステージの訓練1へ

4. **ラストステージ**
   - 上級のテスト合格後に遷移
   - 全単音1.5秒以内の挑戦
   - 終わるまで継続